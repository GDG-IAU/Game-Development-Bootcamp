
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../2-The-Game-Loop/">
      
      
        <link rel="next" href="../Resources/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>3. Making Pong - Google Developer Groups IAU - Game Development Track</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#3-making-pong" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Google Developer Groups IAU - Game Development Track" class="md-header__button md-logo" aria-label="Google Developer Groups IAU - Game Development Track" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Google Developer Groups IAU - Game Development Track
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3. Making Pong
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  Week 1. Making Your First Game

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Week-2.-Intro-to-Godot/" class="md-tabs__link">
          
  
  Week 2. Intro to Godot

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Google Developer Groups IAU - Game Development Track" class="md-nav__button md-logo" aria-label="Google Developer Groups IAU - Game Development Track" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Google Developer Groups IAU - Game Development Track
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Week 1. Making Your First Game
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Week 1. Making Your First Game
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1-Setting-Up/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2-The-Game-Loop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. The Game Loop
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    3. Making Pong
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    3. Making Pong
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initializing-and-drawing" class="md-nav__link">
    <span class="md-ellipsis">
      Initializing and Drawing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#game-logic" class="md-nav__link">
    <span class="md-ellipsis">
      Game Logic
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-paddle-movement" class="md-nav__link">
    <span class="md-ellipsis">
      1. Paddle Movement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-balls-movement" class="md-nav__link">
    <span class="md-ellipsis">
      2. Ball's movement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Ball's movement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-collision-detection" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Collision Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-reflection" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Reflection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-ceiling-floor-bounce" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Ceiling / Floor Bounce
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-scoring-rounds" class="md-nav__link">
    <span class="md-ellipsis">
      3. Scoring Rounds
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Tasks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resources
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Week 2. Intro to Godot
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Week 2. Intro to Godot
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/Game-Engine-Concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Game Engines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/Nodes-and-Scenes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nodes and Scenes in Godot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/Creating-a-Moving-Square/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating a Moving Square
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/Making-a-Simple-Platformer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Making a Simple Platformer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/Tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    GDScript
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            GDScript
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/GDScript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What is GDScript?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/GDScript/Variables-and-Data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Variables and Data Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/GDScript/Functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/GDScript/Array/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Array
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/GDScript/RNG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Random Number Generator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/GDScript/Operators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operators and Computation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/GDScript/If-else/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    If-else Statements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/GDScript/Dictionaries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dictionaries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Week-2.-Intro-to-Godot/GDScript/Looping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Looping
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initializing-and-drawing" class="md-nav__link">
    <span class="md-ellipsis">
      Initializing and Drawing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#game-logic" class="md-nav__link">
    <span class="md-ellipsis">
      Game Logic
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-paddle-movement" class="md-nav__link">
    <span class="md-ellipsis">
      1. Paddle Movement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-balls-movement" class="md-nav__link">
    <span class="md-ellipsis">
      2. Ball's movement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Ball's movement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-collision-detection" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Collision Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-reflection" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Reflection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-ceiling-floor-bounce" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Ceiling / Floor Bounce
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-scoring-rounds" class="md-nav__link">
    <span class="md-ellipsis">
      3. Scoring Rounds
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Tasks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="3-making-pong">3. Making Pong</h1>
<h2 id="structure">Structure</h2>
<p>The game that we're gonna be making is Pong, the first video game made.</p>
<p><img alt="" src="https://www.retrogames.cz/games/530/Pong-gameplay.gif" /></p>
<p>There is a ball in the middle, and two paddles. The ball goes to one paddle which then hits it, and sends it back to the other paddle, if one of them fails to hit and enters their goal, that's a score for the other paddle. Really an extremely simple game.</p>
<p>What we should first do is define the structure when we're making it. In this case, there are just a few elements we have to consider:</p>
<ul>
<li>
<p>There are two paddles</p>
</li>
<li>
<p>1 left and 1 right</p>
</li>
<li>
<p>They can only go up and down</p>
</li>
<li>
<p>They can hit the ball to bounce it off to the other end</p>
</li>
<li>
<p>There's a ball</p>
</li>
<li>
<p>It bounces off the top and bottom of the screen</p>
</li>
<li>
<p>It bounces off the paddles</p>
</li>
<li>
<p>If it enters a paddle's goal then it's a score for the other paddle</p>
</li>
<li>
<p>If a goal is scored the ball and paddles are both reset to the center</p>
</li>
<li>
<p>There is text on the top part of the screen of the paddles' scores</p>
</li>
</ul>
<p>Let's do some housekeeping with our current code before we move any further:</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">SCREEN_WIDTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1280</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">SCREEN_HEIGHT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">720</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">SetTargetFPS</span><span class="p">(</span><span class="mi">60</span><span class="p">);</span>
<span class="w">    </span><span class="n">InitWindow</span><span class="p">(</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Pong&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">WindowShouldClose</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">delta_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetFrameTime</span><span class="p">();</span>

<span class="w">        </span><span class="n">ClearBackground</span><span class="p">(</span><span class="n">BLACK</span><span class="p">);</span>
<span class="w">        </span><span class="n">BeginDrawing</span><span class="p">();</span>
<span class="w">        </span><span class="n">EndDrawing</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>OK. Now let's try defining the structure of our game state. There are three main parts to it: the paddles, the ball, and the score.</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">GameState</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">Rectangle</span><span class="w"> </span><span class="n">right_paddle</span><span class="p">;</span>
<span class="w">    </span><span class="n">Rectangle</span><span class="w"> </span><span class="n">left_paddle</span><span class="p">;</span>

<span class="w">    </span><span class="n">Ball</span><span class="w"> </span><span class="n">ball</span><span class="p">;</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">left_score</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">right_score</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p><code>Rectangle</code> is a struct in Raylib, it has four properties.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Rectangle, 4 components</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Rectangle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w">                </span><span class="c1">// Rectangle top-left corner position x</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w">                </span><span class="c1">// Rectangle top-left corner position y</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">width</span><span class="p">;</span><span class="w">            </span><span class="c1">// Rectangle width</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">height</span><span class="p">;</span><span class="w">           </span><span class="c1">// Rectangle height</span>
<span class="p">}</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">;</span>
</code></pre></div>
<p>We'll use this struct to represent our paddle, which is simple enough. <code>Ball</code> on the other hand though, is a struct of our own that we haven't defined yet. We will define this struct later. We also have two <code>int</code> variables for our left and right scores. And really, this is all the state that we need for our game.</p>
<p>There are three parts to our program: Initialization, then Updating and Drawing in a loop. Let's write these three as functions that take in <code>GameState</code> as a parameter.</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">InitGame</span><span class="p">(</span><span class="n">GameState</span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">UpdateGame</span><span class="p">(</span><span class="n">GameState</span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">DrawGame</span><span class="p">(</span><span class="n">GameState</span><span class="w"> </span><span class="n">state</span><span class="p">);</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Passing by reference</p>
<p>Notice that we placed an ampersand (&amp;) in the <code>GameState</code> parameters of <code>InitGame</code> and <code>UpdateGame</code>. This is because we want to pass in the state as a reference. In other words, we want the <code>InitGame</code> and <code>UpdateGame</code> functions to actually <em>modify</em> the state that it receives <em>for good</em>, and not just take it as a copy to do calculations on.</p>
</div>
<p>Let's rewrite our <code>main</code> function now:</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">GameState</span><span class="w"> </span><span class="n">state</span><span class="p">;</span>
<span class="w">    </span><span class="n">InitGame</span><span class="p">(</span><span class="n">state</span><span class="p">);</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">WindowShouldClose</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">UpdateGame</span><span class="p">(</span><span class="n">state</span><span class="p">);</span>
<span class="w">        </span><span class="n">DrawGame</span><span class="p">(</span><span class="n">state</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>When we write our code this way, the structure of our game becomes much clearer. In reality, many games/game engines follow a pattern similar to this one. Let's write some of the code for the actual functions themselves now.</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">InitGame</span><span class="p">(</span><span class="n">GameState</span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">SetTargetFPS</span><span class="p">(</span><span class="mi">60</span><span class="p">);</span>
<span class="w">    </span><span class="n">InitWindow</span><span class="p">(</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Pong&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">UpdateGame</span><span class="p">(</span><span class="n">GameState</span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">DrawGame</span><span class="p">(</span><span class="n">GameState</span><span class="w"> </span><span class="n">state</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ClearBackground</span><span class="p">(</span><span class="n">BLACK</span><span class="p">);</span>
<span class="w">    </span><span class="n">BeginDrawing</span><span class="p">();</span>
<span class="w">    </span><span class="n">EndDrawing</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>Here this is just boilerplate of the same code we had earlier in <code>main</code>, you'll notice the Update function is left empty, this is because we don't yet have any logic for the game yet. We'll change that soon, but now, we have to actually define our <code>Ball</code> struct.</p>
<p>The ball is similar to the paddles in the way that we don't need to store the ball's size since it's constant; the size won't ever change (unless we want it to later). One way in which they're different however, is that we actually need to store the ball's velocity. The reason is that the ball's velocity is determined solely by the angle of the paddle it hits, or when the game resets. In both these cases, we can't determine the resulting velocity in any given frame, we can only determine the velocity on the exact frame the collision or reset happens. Since we don't want to reset the velocity every frame, the only way we can tell these things is if we retain the data between frames (from the previous frame to the current one, and so on).</p>
<p>When we think about the ball as mutable or variable state, there are only 2 things we have to keep track of: it's position, and it's velocity (movement). We obviously want to know it's position so that we can know the state of the board and the game, but we also want to store the velocity as a variable since we want to keep track of whatever the movement vector is if the ball hit a paddle for example. We don't really have to store the radius as a variable, since it's more of a constant.</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">Ball</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">Vector2</span><span class="w"> </span><span class="n">position</span><span class="p">;</span>
<span class="w">    </span><span class="n">Vector2</span><span class="w"> </span><span class="n">velocity</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p>That concludes this segment of us setting up the data, now let's actually write some code for the game's logic.</p>
<h2 id="initializing-and-drawing">Initializing and Drawing</h2>
<p>The first thing that we need to do is initialize the actual games state, and establish how we're gonna draw the state.</p>
<p>To initialize the state, we want to do just a couple of things:</p>
<ul>
<li>
<p>Zero out the score</p>
</li>
<li>
<p>Place the ball in the center</p>
</li>
<li>
<p>Set the ball's velocity to move to the right</p>
</li>
<li>
<p>Place both paddles in the center, in their respective sides</p>
</li>
</ul>
<p>Writing this out in code is quite simple enough. First let's just establish some constants that will be useful for us in these calculations. Let's also establish the constants for the paddle's sizes and the ball's radius. For the paddle we're just gonna go for a 10 wide and 150 tall rectangle, and the ball has a radius of 10 pixels.</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">SCREEN_TOP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">SCREEN_BOTTOM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SCREEN_HEIGHT</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">SCREEN_LEFT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">SCREEN_RIGHT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SCREEN_WIDTH</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">SCREEN_CENTER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">SCREEN_WIDTH</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="n">SCREEN_HEIGHT</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="w"> </span><span class="p">};</span>

<span class="k">const</span><span class="w"> </span><span class="n">Vector2</span><span class="w"> </span><span class="n">PADDLE_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="w"> </span><span class="p">};</span>
<span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">BALL_RADIUS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10.0f</span><span class="p">;</span>
</code></pre></div>
<p>Now let's get to writing the initialization code.</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">PADDLE_OFFSET_FROM_EDGE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">40.0f</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">InitGame</span><span class="p">(</span><span class="n">GameState</span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">SetTargetFPS</span><span class="p">(</span><span class="mi">60</span><span class="p">);</span>
<span class="w">    </span><span class="n">InitWindow</span><span class="p">(</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Pong&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// set the ball position to the center</span>
<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SCREEN_CENTER</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// we want it to move right, we&#39;ll place 400 for now</span>
<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">400</span><span class="p">;</span><span class="w"> </span><span class="c1">// placeholder value</span>

<span class="w">    </span><span class="c1">// set the paddles&#39; sizes</span>
<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">left_paddle</span><span class="p">.</span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">left_paddle</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>

<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">right_paddle</span><span class="p">.</span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">right_paddle</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>


<span class="w">    </span><span class="c1">// set the paddles&#39; positions</span>
<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">left_paddle</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SCREEN_LEFT</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">PADDLE_OFFSET_FROM_EDGE</span><span class="p">;</span>
<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">left_paddle</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SCREEN_CENTER</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">;</span>

<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">right_paddle</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SCREEN_RIGHT</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">PADDLE_OFFSET_FROM_EDGE</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">right_paddle</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SCREEN_CENTER</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">;</span>

<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">left_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">right_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>We're setting the paddle positions on the x axis by declaring a constant describing how big of a margin we want between the paddles and the edge of the screen, and also making sure to subtract the <code>PADDLE_SIZE.x</code> from the right paddles position taking into account that the origin of the rectangle is in the top-left. For the vertical position we just set it to the <code>SCREEN_CENTER.y</code> subtracting half the <code>PADDLE_SIZE.y</code> to make sure it's properly aligned in the center (keep in mind again that the origin of the rectangle is in the top-left).</p>
<p>This initialization code seems good for now, so let's try drawing the state. This is what our <code>DrawGame()</code> function looks like right now.</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">DrawGame</span><span class="p">(</span><span class="n">GameState</span><span class="w"> </span><span class="n">state</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ClearBackground</span><span class="p">(</span><span class="n">BLACK</span><span class="p">);</span>
<span class="w">    </span><span class="n">BeginDrawing</span><span class="p">();</span>
<span class="w">    </span><span class="n">EndDrawing</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>Let's add the paddles.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">DrawRectangleRec</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">left_paddle</span><span class="p">,</span><span class="w"> </span><span class="n">WHITE</span><span class="p">);</span>
<span class="w">    </span><span class="n">DrawRectangleRec</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">right_paddle</span><span class="p">,</span><span class="w"> </span><span class="n">WHITE</span><span class="p">);</span>
</code></pre></div>
<p><code>DrawRectangleRec</code> is the same as <code>DrawRectangle</code> except it takes in a <code>Rectangle</code> struct as input, instead of 4 variables being manually set.</p>
<p>Now the ball. We're going to use the <code>DrawCircle()</code> function which takes in four arguments: <code>centerX, centerY, radius, color</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">DrawCircle</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">BALL_RADIUS</span><span class="p">,</span><span class="w"> </span><span class="n">WHITE</span><span class="p">);</span>
</code></pre></div>
<p>Finally, let's draw the text of the paddles' score. Here we'll use the <code>DrawText()</code> function which takes in five arguments: <code>text, posX, posY, fontSize, color</code>. For the <code>text</code> parameter, we'll format it the old-school way using the <code>TextFormat()</code> function provided by Raylib.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">DrawText</span><span class="p">(</span>
<span class="w">        </span><span class="n">TextFormat</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">left_score</span><span class="p">),</span><span class="w"> </span><span class="c1">// text</span>
<span class="w">        </span><span class="n">SCREEN_CENTER</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">75</span><span class="p">,</span><span class="w"> </span><span class="c1">// x position</span>
<span class="w">        </span><span class="n">SCREEN_TOP</span><span class="p">,</span><span class="w"> </span><span class="c1">// y position; top of the screen</span>
<span class="w">        </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="n">WHITE</span><span class="p">);</span><span class="w"> </span><span class="c1">// font size, color</span>
<span class="w">    </span><span class="n">DrawText</span><span class="p">(</span>
<span class="w">        </span><span class="n">TextFormat</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">right_score</span><span class="p">),</span><span class="w"> </span><span class="c1">// text</span>
<span class="w">        </span><span class="n">SCREEN_CENTER</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="c1">// x position</span>
<span class="w">        </span><span class="n">SCREEN_TOP</span><span class="p">,</span><span class="w"> </span><span class="c1">// y position; top of the screen</span>
<span class="w">        </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="n">WHITE</span><span class="p">);</span><span class="w"> </span><span class="c1">// font size, color</span>
</code></pre></div>
<p>And we're done. By the end, this is what our <code>DrawGame()</code> function should look like:</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">DrawGame</span><span class="p">(</span><span class="n">GameState</span><span class="w"> </span><span class="n">state</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ClearBackground</span><span class="p">(</span><span class="n">BLACK</span><span class="p">);</span>
<span class="w">    </span><span class="n">BeginDrawing</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Paddles</span>
<span class="w">    </span><span class="n">DrawRectangleRec</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">left_paddle</span><span class="p">,</span><span class="w"> </span><span class="n">WHITE</span><span class="p">);</span>
<span class="w">    </span><span class="n">DrawRectangleRec</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">right_paddle</span><span class="p">,</span><span class="w"> </span><span class="n">WHITE</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Ball</span>
<span class="w">    </span><span class="n">DrawCircle</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">BALL_RADIUS</span><span class="p">,</span><span class="w"> </span><span class="n">WHITE</span><span class="p">);</span>

<span class="w">    </span><span class="n">DrawText</span><span class="p">(</span>
<span class="w">        </span><span class="n">TextFormat</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">left_score</span><span class="p">),</span><span class="w"> </span><span class="c1">// text</span>
<span class="w">        </span><span class="n">SCREEN_CENTER</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">75</span><span class="p">,</span><span class="w"> </span><span class="c1">// x position</span>
<span class="w">        </span><span class="n">SCREEN_TOP</span><span class="p">,</span><span class="w"> </span><span class="c1">// y position; top of the screen</span>
<span class="w">        </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="n">WHITE</span><span class="p">);</span><span class="w"> </span><span class="c1">// font size, color</span>
<span class="w">    </span><span class="n">DrawText</span><span class="p">(</span>
<span class="w">        </span><span class="n">TextFormat</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">right_score</span><span class="p">),</span><span class="w"> </span><span class="c1">// text</span>
<span class="w">        </span><span class="n">SCREEN_CENTER</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="c1">// x position</span>
<span class="w">        </span><span class="n">SCREEN_TOP</span><span class="p">,</span><span class="w"> </span><span class="c1">// y position; top of the screen</span>
<span class="w">        </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="n">WHITE</span><span class="p">);</span><span class="w"> </span><span class="c1">// font size, color</span>

<span class="w">    </span><span class="n">EndDrawing</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>With our state initialized and draw code written, once we build it, this is what it should look like.</p>
<p><img alt="" src="../Images_2/i2.png" /></p>
<p>Now we finally have something resembling a game on our hands. Now that we're done with this slightly tedious part we can finally get to the good part: coding the game logic.</p>
<h2 id="game-logic">Game Logic</h2>
<p>When we think about what we need to do for the game logic, there are a number of things we need to implement.</p>
<ul>
<li>
<p>The paddles must move up and down according to player input</p>
</li>
<li>
<p>The ball must also move according to its determined velocity</p>
</li>
<li>
<p>Velocity is determined when it bounces against a paddle   </p>
</li>
<li>
<p>It's vertical velocity is also flipped if it hits the top or bottom edge of the screen</p>
</li>
<li>
<p>If a paddle scores a goal, the paddles and the ball must be reset, and the score updated</p>
</li>
</ul>
<p>Simple enough, right? Let's take them on one at a time. First, the paddles movement.</p>
<h2 id="1-paddle-movement">1. Paddle Movement</h2>
<p>We covered movement in the beginning part of this section, so this should be easy enough to implement. We'll use continuous movement here, storing player input into a temporary velocity variable that we'll then use to actually displace the paddles' positions. For the left paddle, W and A will be the keys to move up and down, and for the right, UP arrow and DOWN arrow will move it. Before we do that though, we should declare a constant to describe how fast we want the paddle to move. Remember that this will be a <em>pixels per second</em> metric. Let's set it to the screens height so each paddle can cover the entire side of their goal within 1 second.</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">PADDLE_SPEED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">SCREEN_HEIGHT</span><span class="p">;</span>
</code></pre></div>
<p>Now let's write the movement code. Don't forget to multiply the position displacement by delta time so it moves per second rather than per frame.</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">UpdateGame</span><span class="p">(</span><span class="n">GameState</span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">delta_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetFrameTime</span><span class="p">();</span>

<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">right_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">IsKeyDown</span><span class="p">(</span><span class="n">KEY_UP</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">right_velocity</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">PADDLE_SPEED</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">IsKeyDown</span><span class="p">(</span><span class="n">KEY_DOWN</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">right_velocity</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">PADDLE_SPEED</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">left_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">IsKeyDown</span><span class="p">(</span><span class="n">KEY_W</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">left_velocity</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">PADDLE_SPEED</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">IsKeyDown</span><span class="p">(</span><span class="n">KEY_S</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">left_velocity</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">PADDLE_SPEED</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">left_paddle</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">left_velocity</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">delta_time</span><span class="p">;</span>
<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">right_paddle</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">right_velocity</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">delta_time</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Let's build it and see what we get.</p>
<p><img alt="" src="../Images_2/g3.gif" /></p>
<p>That's that part done. Now let's try to get the ball moving.</p>
<h2 id="2-balls-movement">2. Ball's movement</h2>
<p>First off, let's declare a constant just like we did with the paddles to describe how fast the ball should move horizontally, and replace the placeholder value in the Initialization function. Let's go with 900 for now, which will make it cross the screen in about a second and a half.</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">BALL_SPEED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">900.0f</span><span class="p">;</span>

<span class="p">...</span>


<span class="kt">void</span><span class="w"> </span><span class="n">InitGame</span><span class="p">(</span><span class="n">GameState</span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BALL_SPEED</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">;</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<p>I chose to divide the speed by half in the Initialization, and will also do that when the ball is reset via goal since I think it's better to give players a little time to reposition before the round kicks off.</p>
<p>Now let's just apply the movement in the Update function.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">delta_time</span><span class="p">;</span>
<span class="w">    </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">delta_time</span><span class="p">;</span>
</code></pre></div>
<p>Let's try running now.</p>
<p><img alt="" src="../Images_2/i3.png" /></p>
<p>We can see that the ball is in fact moving towards the right. Except, when it reaches the paddle it simply goes through it. The next step for us is to implement basic collision.</p>
<h3 id="21-collision-detection">2.1 Collision Detection</h3>
<p>Raylib already comes with functions for basic collision detection. The one we're interested in is <code>CheckCollisionCircleRec()</code>, which takes in three arguments: <code>center, radius, rec</code>. The <code>rec</code> is of type <code>Rectangle</code>.</p>
<p>We already know the ball's position and radius, and the paddles are already of the <code>Rectangle</code> type, right now let's just try and create simple collision detection that flips the horizontal direction of the ball at max speed if it collides with a paddle.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="c1">// if collided right paddle, go left</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">CheckCollisionCircleRec</span><span class="p">(</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">,</span>
<span class="w">            </span><span class="n">BALL_RADIUS</span><span class="p">,</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">right_paddle</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">BALL_SPEED</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// if collided left paddle, go right</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">CheckCollisionCircleRec</span><span class="p">(</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">,</span>
<span class="w">            </span><span class="n">BALL_RADIUS</span><span class="p">,</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">left_paddle</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BALL_SPEED</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>Let's run it.</p>
<p><img alt="" src="../Images_2/g4.gif" /></p>
<p>It works right. However the ball is always going to move in the same direction regardless of the angle of its collision with the paddle. In Pong, the angle of the ball's movement is determined by which part of the paddle it hit. So let's get to work on that now.</p>
<h3 id="22-reflection">2.2 Reflection</h3>
<p>The basic idea behind the reflection of the ball is that the closer the ball collides with the edge, the greater the angle of its velocity.</p>
<p><img alt="" src="../Images_2/i4.png" /></p>
<p>One way that we can solve this in code is to make a relation between the vertical (y-axis) velocity of the ball and it's distance from the center of the paddle. We'll take the difference between the ball's position and the paddle's center. Then we'll divide by half the height of the paddle (<span class="arithmatex">\(Paddle\ Height\over2\)</span>), i.e. the distance from the top/bottom edge of the paddle to the center, so that the result is normalized from 0 at the ball's center, and 1 at the edge.</p>
<p><img alt="" src="../Images_2/i5.png" /></p>
<p>We'll call this the angle percent, because I don't really have a better name for it. The formula for it is as follows.</p>
<p><span class="arithmatex">\(Angle\ Percent={{Ball\ Position\ Y-Paddle\ Center\ Y}\over {Paddle\ Half\ Width}}\)</span></p>
<p>Once we have this percentage, we can just multiply whatever maximum vertical velocity we want by it. In order to get the paddle's vertical center, we just take the position of its top edge (i.e., it's <code>position.y</code> variable) and add half the height to it.</p>
<p><span class="arithmatex">\(Paddle\ Center\ Y=Paddle\ Top\ Edge+{Paddle\ Height\over2}\)</span></p>
<p>Let's write this out in code so we can get a better idea of it. Let's declare this maximum vertical velocity that we want as a constant.</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">BALL_MAX_VERTICAL_VELOCITY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">180.0f</span><span class="p">;</span>
</code></pre></div>
<p>Now let's write out the formula.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">CheckCollisionCircleRec</span><span class="p">(</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">,</span>
<span class="w">            </span><span class="n">BALL_RADIUS</span><span class="p">,</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">right_paddle</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">paddle_center</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">right_paddle</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">;</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">angle_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">paddle_center</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">);</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BALL_MAX_VERTICAL_VELOCITY</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">angle_percent</span><span class="p">;</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">BALL_SPEED</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">CheckCollisionCircleRec</span><span class="p">(</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">,</span>
<span class="w">            </span><span class="n">BALL_RADIUS</span><span class="p">,</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">left_paddle</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">paddle_center</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">left_paddle</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">;</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">angle_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">paddle_center</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">);</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BALL_MAX_VERTICAL_VELOCITY</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">angle_percent</span><span class="p">;</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BALL_SPEED</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>To make the results more reliable, we'll check for collision with a paddle only if the ball is moving in the paddle's direction. This will guarantee that a ball doesn't collide with the same paddle 2 consecutive frames in a row, if it happens to have partially clipped inside it.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// if moving right</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">CheckCollisionCircleRec</span><span class="p">(</span>
<span class="w">                </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">,</span>
<span class="w">                </span><span class="n">BALL_RADIUS</span><span class="p">,</span>
<span class="w">                </span><span class="n">state</span><span class="p">.</span><span class="n">right_paddle</span><span class="p">))</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">paddle_center</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">right_paddle</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">;</span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">angle_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">paddle_center</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">);</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BALL_MAX_VERTICAL_VELOCITY</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">angle_percent</span><span class="p">;</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">BALL_SPEED</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// if moving left</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">CheckCollisionCircleRec</span><span class="p">(</span>
<span class="w">                </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">,</span>
<span class="w">                </span><span class="n">BALL_RADIUS</span><span class="p">,</span>
<span class="w">                </span><span class="n">state</span><span class="p">.</span><span class="n">left_paddle</span><span class="p">))</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">paddle_center</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">left_paddle</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">;</span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">angle_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">paddle_center</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">PADDLE_SIZE</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">);</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BALL_MAX_VERTICAL_VELOCITY</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">angle_percent</span><span class="p">;</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BALL_SPEED</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>OK. Let's build and try it out.</p>
<p><img alt="" src="../Images_2/i6.png" /></p>
<p>Almost done! Only thing left to do now is to fix the ball not colliding with the top and bottom edges of the screen, which is probably the easiest thing to code here.</p>
<h3 id="23-ceiling-floor-bounce">2.3 Ceiling / Floor Bounce</h3>
<p>In order to get the ball to bounce from the top and bottom edges of the screen, all we need to do is check the top and bottom edge of the circle, and whether or not it's exceeded the respective top and bottom edge of the screen. If it did, we'll simply reverse the vertical velocity to the opposite direction.</p>
<p>So if the bottom edge of the circle collided with the bottom edge of the screen, we would take the current vertical velocity <code>ball.velocity.y</code> and force it to be positive. Likewise with the top ceiling. To force the sign of the velocity, we could just multiply by -1, but that might be unreliable since the ball might be touching an edge of the screen for more than 1 frame if it's gone fast enough to go far off-screen. To fix that, we'll only check for a ceiling/floor hit if its moving in that direction.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// if moving down</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// if bottom edge of ball is greater than bottom edge of screen</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">BALL_RADIUS</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">SCREEN_BOTTOM</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// if moving up</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// if top edge of ball is greater than top edge of screen</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">BALL_RADIUS</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">SCREEN_TOP</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>Let's build it and run.</p>
<p><img alt="" src="../Images_2/g5.gif" /></p>
<p>The ball may seem to clip on the edges before bouncing, this is only because the capture doesn't show the full window however. We're done with the ball now. The final step now is to implement the goal and scoring.</p>
<h2 id="3-scoring-rounds">3. Scoring Rounds</h2>
<p>This is also a very simple task. For this one all we have to do is see if the ball's position has touched or exceeded the right or left edge of the screen, no need to calculate for the right and left edge of the ball precisely, since this mostly will not affect gameplay in any serious way. If the ball did in-fact collide with the right or left edge, we will reset the ball's position and velocity, and increment the appropriate paddle's score.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">SCREEN_RIGHT</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ball entered right goal; left scored</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">left_score</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SCREEN_CENTER</span><span class="p">;</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">;</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BALL_SPEED</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">SCREEN_LEFT</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ball entered left goal; right scored</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">right_score</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SCREEN_CENTER</span><span class="p">;</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">;</span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BALL_SPEED</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>Let's run it.</p>
<p><img alt="" src="../Images_2/g6.gif" /></p>
<p>It works, and now we're done! We've finally made Pong, in it's entirety.</p>
<h2 id="tasks">Tasks</h2>
<p>We recommend stepping through the tutorial yourself and seeing the code get written and why it is the way it is. After you've followed this tutorial and made Pong, you are now tasked with modifying this game in three ways. In order of difficulty:</p>
<ol>
<li>
<p>Change the colors of the game, to whichever you prefer</p>
</li>
<li>
<p>Draw a white vertical line in the middle of the board</p>
</li>
<li>
<p>Create two small thin obstacles, one on the left and right, such that if the ball collides with either of them its horizontal velocity <code>ball.velocity.x</code> will be flipped. (Don't worry about the collision detection not being perfect or slightly buggy, that won't be a factor for the task.)</p>
</li>
</ol>
<p><img alt="" src="../Images_2/g7.gif" /></p>
<p><strong>Hints:</strong></p>
<ul>
<li>
<p>Look at the Raylib cheatsheet for important functions</p>
</li>
<li>
<p>Use <code>DrawLine()</code> for the line</p>
</li>
<li>
<p>Create two <code>Rectangle</code> structs for the obstacles inside of <code>GameState</code></p>
</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>This concludes our first tutorial on making your first game. Though we won't be using Raylib for the rest of the series, hopefully this tutorial was a good introduction into game programming, and how to think like a game programmer. Although we'll be transitioning to Godot from now on, don't forget that these principles you've learned will still be very important when you're actually programming. The frameworks may be different but the concepts are the same.</p>
<p>See you next week!</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://x.com/@GDG_IAU" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/company/gdg-at-iau" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.select", "content.code.copy", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
        <script src="../../javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>